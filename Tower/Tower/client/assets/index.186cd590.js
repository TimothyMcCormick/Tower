import{r as z,c as y,a as k,o as u,b as m,d as f,S as D,e as H,f as o,t as p,u as O,g as B,h as Y,w as h,v as b,i as C,j as K,k as W,l as G,m as F,n as $,p as I,q as P,s as Q,x as X}from"./vendor.5c5d2ec4.js";const J=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}};J();const i=z({user:{},account:{},events:[],activeEvent:{},tickets:[],myTickets:[],comments:[],eventTickets:[],newEventId:""});var g=(s,e)=>{for(const[t,n]of e)s[t]=n;return s};const Z={name:"App",setup(){return{appState:y(()=>i)}}};function ee(s,e,t,n,r,c){const a=k("Navbar"),v=k("router-view");return u(),m("main",null,[f(a),f(v,{class:"bg-color"})])}var te=g(Z,[["render",ee]]);const j=window.location.origin.includes("localhost"),N=j?"http://localhost:3000":"",ne="dev-d2w-birz.us.auth0.com",oe="https://TimothyDev.com",se="AzPtcxQUpitbUrhFdePxegA7iR5VXSkY";function x(s,e){if(j)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const l={log(){x("log",arguments)},error(){x("error",arguments)},warn(){x("warn",arguments)},assert(){x("assert",arguments)},trace(){x("trace",arguments)}};class T{static async confirm(e="Are you sure?",t="You won't be able to revert this!",n="warning",r="Yes, delete it!"){try{return!!(await D.fire({title:e,text:t,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",n="top-end",r=3e3,c=!0){D.fire({title:e,icon:t,position:n,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var t;if(e.isAxiosError){const{response:n}=e;this.toast(((t=n.data.error)==null?void 0:t.message)||n.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const d=H.create({baseURL:N,timeout:8e3});class ae{async getEventComments(e){const t=await d.get(`api/events/${e}/comments`);l.log("getting comments",t.data),i.comments=t.data}async createComment(e){const t=await d.post("api/comments",e);l.log("posting comment",t.data),i.comments.unshift(t.data)}async deleteComment(e){const t=await d.delete(`api/comments/${e}`);l.log(t.data),i.comments=i.comments.filter(n=>n.id!=e)}}const re=new ae;const ce={props:{comment:{type:Object,required:!0}},setup(s){return{comments:y(()=>i.comments),async deleteComment(){try{await re.deleteComment(s.comment.id)}catch(e){l.error(e),T.toast(e.message,"error")}}}}},ie={class:"col-md-9 m-2 elevation-2 bg-main p-4"},le={class:"row justify-content-center"},de={class:"col-2 d-flex justify-content-center align-items-center"},ue=["src"],me={class:"col-8 bg-light elevation-2"},_e={class:"text-dark"},ve={class:"text-dark"},pe={class:"col-1 d-flex justify-content-center align-items-center"};function ge(s,e,t,n,r,c){var a,v;return u(),m("div",ie,[o("div",le,[o("div",de,[o("img",{class:"profile-img",src:(a=t.comment.creator)==null?void 0:a.picture,alt:""},null,8,ue)]),o("div",me,[o("h5",_e,p((v=t.comment.creator)==null?void 0:v.name),1),o("p",ve,p(t.comment.body),1)]),o("div",pe,[o("i",{class:"mdi mdi-delete-forever f-22 selectable",onClick:e[0]||(e[0]=(...w)=>n.deleteComment&&n.deleteComment(...w))})])])])}var fe=g(ce,[["render",ge],["__scopeId","data-v-676a36d7"]]),he=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fe});class be{async getEvents(){const e=await d.get("api/events");l.log("getting events",e.data),i.events=e.data}async getTicket(e){const t=await d.post("api/tickets/",{eventId:e});l.log("get ticket",t.data),i.tickets.push(t.data)}async getTicketsByEvent(e){const t=await d.get(`api/events/${e}/tickets`);l.log("getting tickets by event",t.data),i.eventTickets=t.data}async createEvent(e){const t=await d.post("api/events",e);return l.log("creating event",t.data),i.events.unshift(t.data),t.data}async getEventDetails(e){const t=await d.get(`api/events/${e}`);l.log(t.data),i.activeEvent=t.data}async cancelEvent(e){const t=await d.delete(`api/events/${e}`);l.log("deleting event",t.data)}async deleteTicket(e){const t=await d.delete(`api/tickets/${e}`);l.log("deleting ticket",t.data),i.myTickets=i.myTickets.filter(n=>n.id!=n)}}const q=new be,ye={setup(){const s=O(),e=B(),t=Y({eventId:e.params.id});return{editable:t,events:y(()=>i.events),async createEvent(){try{let n=await q.createEvent(t.value);s.push({name:"EventDetails",params:{id:n.id}}),T.toast("Event Created!","success")}catch(n){T.error(n)}}}}},ke={class:"p-4"},Ee={class:"col-12 mt-2"},we={class:"col-12 mt-2"},xe={class:"col-12 mt-2"},Te={class:"col-12 mt-2"},Ce={class:"col-12 mt-2"},$e={class:"col-12 mt-2"},Se={class:"col-12 mt-2"},Ae={class:"col-12 mt-2 d-flex justify-content-center"};function De(s,e,t,n,r,c){return u(),m("div",ke,[o("form",null,[o("div",Ee,[h(o("input",{class:"form-control",type:"text",required:"",placeholder:"name","onUpdate:modelValue":e[0]||(e[0]=a=>n.editable.name=a)},null,512),[[b,n.editable.name]])]),o("div",we,[h(o("input",{class:"form-control",type:"text",required:"",placeholder:"description","onUpdate:modelValue":e[1]||(e[1]=a=>n.editable.description=a)},null,512),[[b,n.editable.description]])]),o("div",xe,[h(o("input",{class:"form-control",type:"text",required:"",placeholder:"image","onUpdate:modelValue":e[2]||(e[2]=a=>n.editable.coverImg=a)},null,512),[[b,n.editable.coverImg]])]),o("div",Te,[h(o("input",{class:"form-control",type:"text",required:"",placeholder:"location","onUpdate:modelValue":e[3]||(e[3]=a=>n.editable.location=a)},null,512),[[b,n.editable.location]])]),o("div",Ce,[h(o("input",{class:"form-control",type:"number",required:"",placeholder:"capacity","onUpdate:modelValue":e[4]||(e[4]=a=>n.editable.capacity=a)},null,512),[[b,n.editable.capacity]])]),o("div",$e,[h(o("input",{class:"form-control",type:"date",required:"",placeholder:"date","onUpdate:modelValue":e[5]||(e[5]=a=>n.editable.startDate=a)},null,512),[[b,n.editable.startDate]])]),o("div",Se,[h(o("input",{class:"form-control",type:"text",required:"",placeholder:"concert, convention, sport or digital","onUpdate:modelValue":e[6]||(e[6]=a=>n.editable.type=a)},null,512),[[b,n.editable.type]])]),o("div",Ae,[o("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>n.createEvent&&n.createEvent(...a))},"Create!")])])])}var Oe=g(ye,[["render",De]]),Ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Oe});const Pe={props:{event:{type:Object,required:!0}},setup(s){const e=O();return{seeEventDetails(){i.activeEvent=s.event,e.push({name:"EventDetails",params:{id:s.event.id}})},formatDate(t){return`${new Date(t).toDateString()}`}}}},je=["src"],Ne={key:1,class:"img-fluid mt-2",src:"https://nyia.org/wp-content/uploads/2020/03/NYIA_General_Event_Canceled_Sign-01.png",alt:""},qe={key:2},Le={key:3,class:"text-center"};function Re(s,e,t,n,r,c){return u(),m("div",{class:"col-md-3 event-card elevation-4 rounded m-2 selectable text-dark",onClick:e[0]||(e[0]=(...a)=>n.seeEventDetails&&n.seeEventDetails(...a)),style:{width:"18rem"}},[t.event.isCanceled==!1?(u(),m("img",{key:0,class:"img-fluid mt-2",src:t.event.coverImg,alt:""},null,8,je)):(u(),m("img",Ne)),o("h4",null,p(t.event.name),1),o("p",null,p(n.formatDate(t.event.startDate)),1),o("p",null,p(t.event.location),1),t.event.capacity>0?(u(),m("p",qe,p(t.event.capacity+" spots left!"),1)):C("",!0),t.event.capacity<=0?(u(),m("h5",Le,"Sold Out")):C("",!0)])}var Ue=g(Pe,[["render",Re]]),Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ue});const Me="modulepreload",L={},ze="/",S=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${ze}${n}`,n in L)return;L[n]=!0;const r=n.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${c}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Me,r||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),r)return new Promise((v,w)=>{a.addEventListener("load",v),a.addEventListener("error",w)})})).then(()=>e())};function He(s){switch(s){case"./pages/AccountPage.vue":return S(()=>import("./AccountPage.d1a7219a.js"),["assets/AccountPage.d1a7219a.js","assets/AccountPage.ea3b8d57.css","assets/vendor.5c5d2ec4.js"]);case"./pages/EventDetailsPage.vue":return S(()=>import("./EventDetailsPage.b22e8440.js"),["assets/EventDetailsPage.b22e8440.js","assets/EventDetailsPage.bb2a5d0c.css","assets/vendor.5c5d2ec4.js"]);case"./pages/HomePage.vue":return S(()=>import("./HomePage.c99135dc.js"),["assets/HomePage.c99135dc.js","assets/vendor.5c5d2ec4.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function A(s){return()=>He(`./pages/${s}.vue`)}const Be=[{path:"/",name:"Home",component:A("HomePage")},{path:"/eventDetails/:id",name:"EventDetails",component:A("EventDetailsPage")},{path:"/account",name:"Account",component:A("AccountPage"),beforeEnter:G}],R=K({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:W(),routes:Be});class Ye{async getAccount(){try{const e=await d.get("/account");i.account=e.data}catch(e){l.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getMyTickets(){const e=await d.get("/account/tickets");l.log("getting my tickets",e.data),i.myTickets=e.data}}const Ke=new Ye,We={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Ge{constructor(e=!1,t=N){}on(e,t){var n;return(n=this.socket)==null||n.on(e,t.bind(this)),this}onConnected(e){l.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){l.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(We.authenticate,e)}onError(e){l.error("[SOCKET_ERROR]",e)}enqueue(e,t){l.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){l.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Fe extends Ge{constructor(){super();this.on("error",this.onError)}onError(e){T.toast(e.message,"error")}}const U=new Fe,_=F({domain:ne,clientId:se,audience:oe,useRefreshTokens:!0,onRedirectCallback:s=>{R.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});_.on(_.AUTH_EVENTS.AUTHENTICATED,async function(){d.defaults.headers.authorization=_.bearer,d.interceptors.request.use(Qe),i.user=_.user,await Ke.getAccount(),U.authenticate(_.bearer)});async function Qe(s){if(!_.isAuthenticated)return s;const e=_.identity.exp*1e3,t=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return t?await _.loginWithPopup():n&&(await _.getTokenSilently(),d.defaults.headers.authorization=_.bearer,U.authenticate(_.bearer)),s}const Xe={setup(){return{user:y(()=>i.user),account:y(()=>i.account),async login(){_.loginWithPopup()},async logout(){_.logout({returnTo:window.location.origin})}}}},V=s=>(I("data-v-f7b5cf20"),s=s(),P(),s),Je={class:"navbar-text"},Ze={key:1,class:"dropdown my-2 my-lg-0"},et={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},tt={key:0},nt=["src"],ot={class:"mx-3 text-success lighten-30"},st={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},at=V(()=>o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),rt=V(()=>o("i",{class:"mdi mdi-logout"},null,-1)),ct=Q(" logout "),it=[rt,ct];function lt(s,e,t,n,r,c){const a=k("router-link");return u(),m("span",Je,[n.user.isAuthenticated?(u(),m("div",Ze,[o("div",et,[n.account.picture?(u(),m("div",tt,[o("img",{src:n.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,nt),o("span",ot,p(n.account.name),1)])):C("",!0)]),o("div",st,[f(a,{to:{name:"Account"}},{default:$(()=>[at]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...v)=>n.logout&&n.logout(...v))},it)])])):(u(),m("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...v)=>n.login&&n.login(...v))}," Login "))])}var dt=g(Xe,[["render",lt],["__scopeId","data-v-f7b5cf20"]]),ut=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dt});const mt={props:{ticket:{type:Object,required:!0}},setup(s){return{myTickets:y(()=>i.myTickets),async deleteTicket(){try{await q.deleteTicket(s.ticket.id)}catch(e){l.error(e),T.toast(e.message,"error")}}}}},_t={class:"col-md-3 elevation-2 rounded event-card text-dark m-2",style:{width:"18rem"}},vt=["src"],pt={class:"d-flex justify-content-center align-items-end"};function gt(s,e,t,n,r,c){return u(),m("div",_t,[o("img",{class:"img-fluid mt-2",src:t.ticket.event.coverImg,alt:""},null,8,vt),o("h4",null,p(t.ticket.event.name),1),o("p",null,p(t.ticket.event.location),1),o("div",pt,[o("button",{class:"btn btn-danger m-2",onClick:e[0]||(e[0]=(...a)=>n.deleteTicket&&n.deleteTicket(...a))}," Delete Ticket ")])])}var ft=g(mt,[["render",gt]]),ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const bt={setup(){return{}}},E=s=>(I("data-v-a1ac36ee"),s=s(),P(),s),yt={class:"navbar navbar-expand-lg navbar-dark nav-color px-3"},kt=E(()=>o("p",{class:"tower-logo pe-4 m-1 text-light"},"Tower Events",-1)),Et={class:"d-flex justify-content-between"},wt=E(()=>o("div",{class:"d-flex justify-content-center m-0"},[o("i",{class:"mdi mdi-home selectable f-24"})],-1)),xt=E(()=>o("div",{class:"d-flex justify-content-center m-0"},[o("i",{class:"mdi mdi-account selectable f-24"})],-1)),Tt=E(()=>o("div",{class:"d-flex justify-content-center align-items-center"},[o("span",null,[o("i",{class:"mdi mdi-plus-circle f-24 selectable text-light","data-bs-toggle":"modal","data-bs-target":"#modelId"})])],-1)),Ct={class:"modal fade",id:"modelId",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},$t={class:"modal-dialog",role:"document"},St={class:"modal-content"},At=E(()=>o("div",{class:"modal-header"},[o("h3",null,"Create An Event"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Dt={class:"collapse navbar-collapse",id:"navbarText"},Ot=E(()=>o("ul",{class:"navbar-nav me-auto"},[o("li")],-1));function It(s,e,t,n,r,c){const a=k("router-link"),v=k("CreateEvent"),w=k("Login");return u(),m("nav",yt,[kt,o("div",Et,[f(a,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:$(()=>[wt]),_:1}),f(a,{class:"navbar-brand d-flex",to:{name:"Account"}},{default:$(()=>[xt]),_:1}),Tt]),o("div",Ct,[o("div",$t,[o("div",St,[At,f(v)])])]),o("div",Dt,[Ot,f(w)])])}var Pt=g(bt,[["render",It],["__scopeId","data-v-a1ac36ee"]]),jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pt});const Nt={setup(){return{}}};function qt(s,e,t,n,r,c){return null}var Lt=g(Nt,[["render",qt]]),Rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Lt});function Ut(s){Object.entries({"./components/Comment.vue":he,"./components/CreateEvent.vue":Ie,"./components/Event.vue":Ve,"./components/Login.vue":ut,"./components/MyEvents.vue":ht,"./components/Navbar.vue":jt,"./components/Navigation.vue":Rt}).forEach(([t,n])=>{const r=n.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(r,n.default)})}const M=X(te);Ut(M);M.use(R).mount("#app");export{i as A,T as P,g as _,Ke as a,re as c,q as e,l};

import{g as b,h as p,y as E,c as d,a as k,o,b as i,f as t,i as w,t as r,F as u,z as y,w as x,v as C,p as D,q as S,A as T}from"./vendor.5c5d2ec4.js";import{_ as j,l,e as m,c as f,P as v,A as _}from"./index.186cd590.js";const I={name:"EventDetails",setup(){const s=b(),c=p({eventId:s.params.id});return E(async()=>{try{l.log(s.params),await m.getEventDetails(s.params.id),await f.getEventComments(s.params.id),await m.getTicketsByEvent(s.params.id)}catch(n){l.error(n),v.toast(n.message,"error")}}),{editable:c,route:s,account:d(()=>_.account),activeEvent:d(()=>_.activeEvent),comments:d(()=>_.comments),eventTickets:d(()=>_.eventTickets),formatDate(n){return`${new Date(n).toDateString()}`},formatTime(n){return`${new Date(n).toLocaleTimeString()}`},async getTicket(){try{await m.getTicket(s.params.id)}catch(n){l.error(n),v.toast(n.message,"error")}},async createComment(){try{await f.createComment(c.value)}catch(n){l.error(n),v.toast(n.message,"error")}},async cancelEvent(){try{await m.cancelEvent(s.params.id)}catch(n){l.error(n),v.toast(n.message,"error")}}}}},g=s=>(D("data-v-65db6bac"),s=s(),S(),s),A={class:"container-fluid"},B={class:"row align-items-center m-2 elevation-2 bg-main"},P={class:"col-md-4"},N=["src"],V={key:1,class:"img-fluid",src:"https://nyia.org/wp-content/uploads/2020/03/NYIA_General_Event_Canceled_Sign-01.png",alt:""},F={class:"col-md-8"},L={class:"d-flex justify-content-center"},M=["disabled"],q={class:"col-12 d-flex justify-content-between p-2"},z={class:"text-end"},G={class:"text-end"},O={class:"col-12"},R={key:0},U=g(()=>t("p",{class:"bg-danger text-white text-center"},"Event Canceled",-1)),Y=[U],H={key:1,class:"col-12 d-flex justify-content-between"},J={key:1,class:"btn btn-danger",disabled:""},K={class:"bg-main row filter-color text-light"},Q=g(()=>t("h4",{class:"text-center"},"Attendees:",-1)),W={class:"d-flex justify-content-center"},X=["src"],Z={class:"row pt-2 justify-content-center"},$=g(()=>t("div",{class:"m-2 d-flex justify-content-end"},[t("button",{class:"btn btn-primary",type:"submit"},"Post Comment")],-1));function ee(s,c,n,e,te,ne){const h=k("Comment");return o(),i("div",A,[t("div",B,[t("div",P,[e.activeEvent.isCanceled==!1?(o(),i("img",{key:0,class:"img-fluid",src:e.activeEvent.coverImg,alt:""},null,8,N)):(o(),i("img",V))]),t("div",F,[t("div",L,[e.activeEvent.creatorId==e.account.id?(o(),i("button",{key:0,class:"btn btn-danger m-2",onClick:c[0]||(c[0]=(...a)=>e.cancelEvent&&e.cancelEvent(...a)),disabled:e.activeEvent.isCanceled}," Cancel Event ",8,M)):w("",!0)]),t("div",q,[t("div",null,[t("h4",null,r(e.activeEvent.name),1),t("h5",null,r(e.activeEvent.location),1)]),t("div",null,[t("h4",z,r(e.formatDate(e.activeEvent.startDate)),1),t("h5",G,r(e.formatTime(e.activeEvent.startDate)),1)])]),t("div",O,[t("p",null,r(e.activeEvent.description),1)]),e.activeEvent.isCanceled?(o(),i("div",R,Y)):(o(),i("div",H,[t("h5",null,r(e.activeEvent.capacity+" spots left!"),1),e.activeEvent.capacity>0?(o(),i("button",{key:0,class:"btn btn-primary m-2",onClick:c[1]||(c[1]=(...a)=>e.getTicket&&e.getTicket(...a))}," Attend! ")):(o(),i("button",J,"Sold Out!"))]))])]),t("div",K,[Q,(o(!0),i(u,null,y(e.eventTickets,a=>(o(),i("div",{key:a.id},[t("div",W,[t("img",{class:"small-profile-img p-2",src:a.account.picture,alt:""},null,8,X),t("p",null,r(a.account.name),1)])]))),128))]),t("div",Z,[t("form",{onSubmit:c[3]||(c[3]=(...a)=>e.createComment&&e.createComment(...a))},[t("div",null,[x(t("textarea",{class:"form-control","onUpdate:modelValue":c[2]||(c[2]=a=>e.editable.body=a)},null,512),[[C,e.editable.body]])]),$],32),(o(!0),i(u,null,y(e.comments,a=>(o(),T(h,{key:a.id,comment:a},null,8,["comment"]))),128))])])}var oe=j(I,[["render",ee],["__scopeId","data-v-65db6bac"]]);export{oe as default};
